<h1> Conversations </h1>

<div class="ui list">
  <div class="item">
    <% @conversations.each do |conversation| %>
      <% if conversation.sender_id == current_user.id || conversation.recipient_id == current_user.id %>
        <% if conversation.sender_id == current_user.id %>
          <% recipient = User.find(conversation.recipient_id) %>
        <% else %>
          <% recipient = User.find(conversation.sender_id) %>
        <% end %>
        <%= link_to recipient.email, conversation_messages_path(conversation, num_messages_to_show: 10)%> <br>
        <% last_message = conversation.messages[conversation.messages.length - 1] %>
        <% if last_message.user_id == current_user.id %>
          <div class="text-preview"> You: <%= last_message.content %> </div> <br>
        <% else %>
          <div class="text-preview"> <%= recipient.email %>: <%= last_message.content %> </div> <br>
        <% end %>
      <% end %>
    <% end %>
  </div>
</div>

    

<!-- <div class=”ui segment”>
 <h3 , style="padding-left: 10px">All Users</h3>
  <div class="collection">
    <% @users.each do |user| %>
    <% if user.id != current_user.id %>
     <div class="collection-item", style="padding-left: 10px">
      <%= user.email %> <%= link_to "Send Message", conversations_path(sender_id: current_user.id, recipient_id: user.id), method: 'post', class: "waves-effect waves-light btn " %>
     </div>
    <% end %>
   <% end %>
  </div>
</div> -->
